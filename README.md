[![License: Apache 2.0](https://img.shields.io/badge/License-Apache_2.0-blue.svg)](https://www.apache.org/licenses/LICENSE-2.0)

# `dialogger` ‚Ä¢ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç ChatGPT-–¥–∏–∞–ª–æ–≥ –≤ Markdown-—Ñ–∞–π–ª
> –î–ª–∏–Ω–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ —Å ChatGPT —Ö–æ—á–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª ‚Äî –∏ –ø–æ—Ç–æ–º —Å —ç—Ç–∏–º —Ñ–∞–π–ª–æ–º —Ä–∞–±–æ—Ç–∞—Ç—å.

## –ü—Ä–æ—Å—Ç—ã–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
1. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞. –ù–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç.
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∏–∞–ª–æ–≥ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ChatGPT. –¢–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ—Ç.
3. –í—ã–¥–µ–ª–∏—Ç—å –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—Ä—É–∫–∞–º–∏ –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏) –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤ –±—É—Ñ–µ—Ä. –î–µ–π—Å—Ç–≤–∏–µ ¬´–í—ã–¥–µ–ª–∏—Ç—å –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã¬ª –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É: –≤ –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ ¬´–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å¬ª, –∞ –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –¥–∏–∞–ª–æ–≥–∞ —Å–∫—Ä—ã—Ç–∞ –∏–ª–∏ –¥–∞–∂–µ –Ω–µ –ø–æ–¥–≥—Ä—É–∂–µ–Ω–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞.
4. –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –∫–Ω–æ–ø–∫–∏ –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ. –ú–æ–∂–Ω–æ, –∏ –¥–∞–∂–µ –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤ —Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ [—Å–∏—Å—Ç–µ–º—ã –±—ã—Å—Ç—Ä—ã—Ö –∫–æ–º–∞–Ω–¥](https://support.apple.com/ru-ru/guide/shortcuts-mac/welcome/mac)) ‚Äî –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã, –∏ –¥–∏–∞–ª–æ–≥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–º.
5. –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–≥–∏–Ω –∏–ª–∏ –±—É–∫–º–∞—Ä–∫–ª–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ª–∏—Å—Ç–∞–µ—Ç –¥–∏–∞–ª–æ–≥ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ —Ñ–∞–π–ª –≤—Å—ë, —á—Ç–æ –Ω–∞–π–¥—ë—Ç. –£ –ø–ª–∞–≥–∏–Ω–æ–≤ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ —É –±—É–∫–º–∞—Ä–∫–ª–µ—Ç–æ–≤ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É –¥–∏–∞–ª–æ–≥–∞. ChatGPT –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é [CSP](https://developer.mozilla.org/ru/docs/Glossary/CSP), —á—Ç–æ–±—ã –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–∞–∫–æ–º—É –¥–æ—Å—Ç—É–ø—É.
## –†–∞–±–æ—Ç–∞—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ
> [!NOTE]
> –í–∞—Ä–∏–∞–Ω—Ç—ã –∫–æ–¥–∞ –¥–∞–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è [Google Chrome](https://www.google.com/chrome/) –∏ [ChatGPT Atlas](https://openai.com/index/introducing-chatgpt-atlas/)

–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é [—Å–Ω–∏–ø–ø–µ—Ç–æ–≤](https://developer.chrome.com/docs/devtools/javascript/snippets) ‚Äî —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –≤ Chrome Dev Tools —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ JavaScript-–∫–æ–¥–∞. –£ –Ω–∏—Ö –µ—Å—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –ú–∏–Ω—É—Å—ã: –æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ, –∫ –Ω–∏–º –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É.
1. [–°–æ–∑–¥–∞–π—Ç–µ](https://developer.chrome.com/docs/devtools/javascript/snippets?hl=ru#create) –Ω–æ–≤—ã–π —Å–Ω–∏–ø–ø–µ—Ç.
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ –Ω–µ–≥–æ —Ç–∞–∫–æ–π –∫–æ–¥.
	- –∫–æ–¥ –¥–ª—è Google Chrome:
```javascript
console.clear();

(async () => {
  console.log("üöÄ ChatGPT Chrome Export Script –∑–∞–ø—É—â–µ–Ω");

  // --- 1. –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —á—Ç–æ–±—ã –ø–æ–¥–≥—Ä—É–∑–∏—Ç—å –≤–µ—Å—å –¥–∏–∞–ª–æ–≥ ---
  async function autoScroll() {
    return new Promise((resolve) => {
      let lastHeight = 0;
      const interval = setInterval(() => {
        window.scrollBy(0, 500);
        const currentHeight = document.body.scrollHeight;
        if (currentHeight === lastHeight) {
          clearInterval(interval);
          resolve();
        } else {
          lastHeight = currentHeight;
        }
      }, 500);
    });
  }

  console.log("üìú –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞—é –¥–∏–∞–ª–æ–≥...");
  await autoScroll();
  console.log("‚úÖ –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞");

  // --- 2. –°–æ–±–∏—Ä–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è ---
  const messages = [];
  document.querySelectorAll("div[data-message-author-role]").forEach(el => {
    const role = el.getAttribute("data-message-author-role");
    const textContainer =
      el.querySelector(".markdown, .whitespace-pre-wrap") || el;
    let html = textContainer.innerHTML || "";

    // --- 3. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è HTML ‚Üí Markdown ---
    html = html
        // üßπ –£–¥–∞–ª—è–µ–º –≤—Å—ë –º–µ–∂–¥—É <pre> –∏ <code>
      .replace(/<pre[^>]*>[\s\S]*?<code/g, "<pre><code")
      
      // –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ –±–ª–æ–∫–∏ –∫–æ–¥–∞ (—Å <pre>, <code>, <span> –∏ –ª—é–±—ã–º–∏ –≤–ª–æ–∂–µ–Ω–∏—è–º–∏)
      .replace(/<pre[\s\S]*?<\/pre>/g, block => {
        let code = block
          .replace(/<\/?pre[^>]*>/g, "")
          .replace(/<\/?code[^>]*>/g, "")
          .replace(/<\/?span[^>]*>/g, "")
          .replace(/<br\s*\/?>/g, "\n")
          .replace(/&lt;/g, "<")
          .replace(/&gt;/g, ">")
          .replace(/&amp;/g, "&")
          .trim();
        return `\n\`\`\`\n${code}\n\`\`\`\n`;
      })

      // inline-–∫–æ–¥ <code>‚Ä¶</code>
      .replace(/<code[^>]*>([\s\S]*?)<\/code>/g, (m, code) => {
        const clean = code
          .replace(/&lt;/g, "<")
          .replace(/&gt;/g, ">")
          .replace(/&amp;/g, "&")
          .trim();
        return `\`${clean}\``;
      })

      // —Å–ø–∏—Å–∫–∏
      .replace(/<\/li>\s*/g, "\n")
      .replace(/<li[^>]*>\s*(?:<p[^>]*>\s*)?/g, "- ")
      .replace(/<\/p>\s*<\/li>/g, "\n")
      .replace(/<\/?ul[^>]*>/g, "\n")

      // –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã, –≤—ã–¥–µ–ª–µ–Ω–∏–µ
      .replace(/<\/p>\s*<p>/g, "\n\n")
      .replace(/<\/?p>/g, "")
      .replace(/<\/?strong>/g, "**")
      .replace(/<\/?em>/g, "_")

      // —É–±—Ä–∞—Ç—å –ª–∏—à–Ω–µ–µ
      .replace(/<\/?[^>]+>/g, "")
      .replace(/[ \t]+\n/g, "\n")
      .replace(/\n{3,}/g, "\n\n")
      .trim();

    if (html) messages.push({ role, text: html });
  });

  console.log(`üí¨ –ù–∞–π–¥–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π: ${messages.length}`);

  // --- 4. –°–æ–±–∏—Ä–∞–µ–º Markdown ---
  const md = messages
    .map(m => (m.role === "user" ? `## ${m.text}` : `${m.text}`))
    .join("\n\n");

  // --- 5. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Ñ–∞–π–ª ---
  const timestamp = new Date().toISOString().replace(/[:.]/g, "-");
  const blob = new Blob([md], { type: "text/markdown;charset=utf-8" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = `chatgpt_export_${timestamp}.md`;
  a.click();
  URL.revokeObjectURL(url);

  console.log(`‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π: ${messages.length}`);
})();

```
- –∫–æ–¥ –¥–ª—è ChatGPT Atlas:
```javascript
console.clear();

(async () => {
  console.log("üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Å–±–æ—Ä –¥–∏–∞–ª–æ–≥–∞ —Å Markdown-—Ä–∞–∑–º–µ—Ç–∫–æ–π‚Ä¶");

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –≤–Ω–∏–∑
  async function autoScroll(delay = 800) {
    return new Promise(resolve => {
      let lastScroll = 0;
      const interval = setInterval(() => {
        window.scrollBy(0, window.innerHeight);
        if (window.scrollY === lastScroll) {
          clearInterval(interval);
          resolve();
        }
        lastScroll = window.scrollY;
      }, delay);
    });
  }

  await autoScroll(); // –ø—Ä–æ–∫—Ä—É—Ç–∫–∞, —á—Ç–æ–±—ã –ø–æ–¥–≥—Ä—É–∑–∏—Ç—å –≤—Å—ë

  const container = document.querySelector("#mini-chat-content");
  if (!container) return console.error("‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω");

  const articles = Array.from(container.querySelectorAll("article"));
  console.log("üì¶ –ù–∞–π–¥–µ–Ω–æ article:", articles.length);

  const messages = [];

  for (const article of articles) {
    const turn = article.getAttribute("data-turn"); // user / assistant

    let text = "";
    if (turn === "user") {
      const el = article.querySelector(".whitespace-pre-wrap");
      if (el) text = el.innerText.trim();
    } else if (turn === "assistant") {
      const el = article.querySelector(".markdown");
      if (el) {

        let html = el.innerHTML;

        // üß† –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Ç–µ–≥–∏ <code> –≤ Markdown
        html = html.replace(/<code[^>]*>([\s\S]*?)<\/code>/g, (match, code) => {
          const cleanCode = code
            .replace(/&lt;/g, "<")
            .replace(/&gt;/g, ">")
            .replace(/&amp;/g, "&")
            .trim();

          // –ï—Å–ª–∏ –∫–æ–¥ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π ‚Üí ```‚Ä¶```, –∏–Ω–∞—á–µ `‚Ä¶`
          return cleanCode.includes("\n")
            ? `\n\`\`\`\n${cleanCode}\n\`\`\`\n`
            : `\`${cleanCode}\``;
        });

                // üîπ –≠–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ (—É–¥–∞–ª—è–µ–º –≤—Å–µ –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –∏ –ø–µ—Ä–µ–Ω–æ—Å—ã)

        html = html
          .replace(/<\/li>\s*/g, "\n")                  // –∫–æ–Ω–µ—Ü li ‚Üí –ø–µ—Ä–µ–Ω–æ—Å
          .replace(/<li[^>]*>\s*(?:<p[^>]*>\s*)?/g, "- ") // –Ω–∞—á–∞–ª–æ li ‚Üí "- ", —É–±–∏—Ä–∞–µ–º <p> –≤–Ω—É—Ç—Ä–∏
          .replace(/<\/p>\s*<\/li>/g, "\n")             // –∑–∞–∫—Ä—ã—Ç–∏–µ p+li ‚Üí –æ–¥–∏–Ω –ø–µ—Ä–µ–Ω–æ—Å
          .replace(/<\/?ul[^>]*>/g, "\n");               // —Å–∞–º —Å–ø–∏—Å–æ–∫ ‚Äî –æ–¥–∏–Ω –ø–µ—Ä–µ–Ω–æ—Å

        // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º HTML ‚Üí Markdown
        text = html
          .replace(/<br\s*\/?>/g, "\n")
          .replace(/<\/p>\s*<p>/g, "\n\n")
          .replace(/<\/?p>/g, "")
          .replace(/<\/?strong>/g, "**")
          .replace(/<\/?em>/g, "_")
          .replace(/<\/?code>/g, "`")
          .replace(/<\/?ul>/g, "")
          .replace(/<\/?li>\n/g, "\n- ")
          .replace(/<\/?[^>]+>/g, "")
          .replace(/\n{3,}/g, "\n\n")
          .trim();
      }
    }

    if (text) messages.push({ role: turn, text });
  }

  // –°–æ–±–∏—Ä–∞–µ–º Markdown-–¥–∏–∞–ª–æ–≥
  const markdownText = messages
    .map(m =>
      m.role === "user"
        ? `## ${m.text}`
        : `${m.text}`
    )
    .join("\n\n");

  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  const now = new Date();
  const timestamp = now.toISOString().replace(/[:.]/g, "-").replace("T", "_").slice(0, 19);
  const filename = `chatgpt_dialog_${timestamp}.md`;

  const blob = new Blob([markdownText], { type: "text/markdown;charset=utf-8" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = filename;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);

  console.log(`‚úÖ –ì–æ—Ç–æ–≤–æ! –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—ë–Ω –∫–∞–∫ ${filename}`);
})();
```
3. –î–æ–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–¥ –ø–æ –≤–∫—É—Å—É. –ú–æ–∂–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å, —Ä–∞–±–æ—Ç–∞—Ç—å –±—É–¥–µ—Ç –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ.
4. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–∏–∞–ª–æ–≥ —Å ChatGPT, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å.
5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–∏–ø–ø–µ—Ç.
6. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–∞—Ç–∞–ª–æ–≥, –≥–¥–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å–∫–∞—á–∞–Ω–Ω—ã–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Ñ–∞–π–ª—ã, –∏ –Ω–∞–π–¥–∏—Ç–µ —Ç–∞–º —Ñ–∞–π–ª —Å –¥–∏–∞–ª–æ–≥–æ–º.
## –ß—Ç–æ –º–æ–∂–Ω–æ –¥–æ–ø–∏–ª–∏–≤–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å
1. –†–∞–∑–¥–µ–ª–∏—Ç—å –∫–æ–¥ –Ω–∞ –¥–≤–∞ —Å–Ω–∏–ø–ø–µ—Ç–∞ ‚Äî –≤—ã–≤–æ–¥ –¥–∏–∞–ª–æ–≥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ –≤ —Ñ–∞–π–ª.
2. –¢—é–Ω–∏–Ω–≥ —Ç–æ–π —á–∞—Å—Ç–∏ –∫–æ–¥–∞, –≥–¥–µ HTML –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ Markdown. –î–ª—è —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ —ç—Ç–∏ —á–∞—Å—Ç–∏ –∫–æ–¥–∞ —É–∂–µ —Å–µ–π—á–∞—Å –Ω–∞–ø–∏—Å–∞–Ω—ã –ø–æ-—Ä–∞–∑–Ω–æ–º—É.
3. –°–æ—Ö—Ä–∞–Ω—è—Ç—å –µ—â—ë –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏. –ü–æ–∫–∞ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –Ω–µ –±—ã–ª–æ.
